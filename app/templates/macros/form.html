{% macro form(form, endpoint, form_class="", group_class="", default_values={}) %}
<form action="{{ url_for(endpoint) }}" class="{{ form_class }}" method="POST">
    {{ form.hidden_tag() }}
    {% for field in form %}
        {% if field.type != 'CSRFTokenField' and field.type != 'SubmitField' %}
            <div class="form-group {{ group_class }}">
                {{ field.label(class="form-label") }}
                {% if field.name in default_values %}
                    {{ field(class="form-control is-invalid" if field.errors else "form-control", value=default_values[field.name], placeholder=field.label.text) }}
                {% else %}
                    {{ field(class="form-control is-invalid" if field.errors else "form-control", placeholder=field.label.text) }}
                {% endif %}
                {% for error in field.errors %}
                    <div class="invalid-feedback" style="display: block;">{{ error }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endfor %}
    {{ form.submit(class="btn btn-custom btn-block") }}
</form>
{% endmacro %}
